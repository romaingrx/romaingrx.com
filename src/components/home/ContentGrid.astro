---
import BlogCard from '@/components/blog/card/index.astro';
import { routes } from '@/configs/routes';
import type { BlogPostWithAuthors, NoteWithAuthors } from '@/lib/collections';
import Time from '../ui/time.astro';

interface Props {
  posts?: BlogPostWithAuthors[];
  notes?: NoteWithAuthors[];
  className?: string;
}

const { posts = [], notes = [], className = '' } = Astro.props;
---

<!-- Bento Grid -->
<div class={`grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4 ${className}`}>
  {/* Main blog post - takes 2 columns */}
  {
    posts.length > 0 && (
      <div class="relative col-span-full md:col-span-2 lg:col-span-2">
        <BlogCard post={posts[0]!} className="h-full" layout="horizontal" size="lg" />
        <div class="bg-primary/90 text-primary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          blog
        </div>
      </div>
    )
  }

  {/* First note - takes 1 column */}
  {
    notes.length > 0 && (
      <div class="relative col-span-full md:col-span-1 lg:col-span-1">
        <a
          href={routes.note({ slug: notes[0]!.slug })}
          class="group border-border/40 bg-card flex h-full min-h-[180px] flex-col justify-between rounded-lg border p-4 shadow-sm transition duration-200 hover:shadow-md dark:border-white/[0.2]"
        >
          <div class="flex items-center justify-between">
            <Time date={notes[0]!.data.published_date} className="text-xs text-muted-foreground" />
          </div>
          <div class="transition duration-200 group-hover:translate-x-2">
            <h3 class="text-foreground mb-2 line-clamp-2 font-medium tracking-tight">
              {notes[0]!.data.title}
            </h3>
            {notes[0]!.data.description && (
              <p class="text-muted-foreground line-clamp-3 text-sm">{notes[0]!.data.description}</p>
            )}
          </div>
        </a>
        <div class="bg-secondary/90 text-secondary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          note
        </div>
      </div>
    )
  }

  {/* Second blog post - takes 1 column */}
  {
    posts.length > 1 && (
      <div class="relative col-span-full md:col-span-1 lg:col-span-1">
        <BlogCard post={posts[1]!} className="h-full" layout="default" size="sm" />
        <div class="bg-primary/90 text-primary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          blog
        </div>
      </div>
    )
  }

  {/* Third blog post - takes 1 column */}
  {
    posts.length > 2 && (
      <div class="relative col-span-full md:col-span-1 lg:col-span-1">
        <BlogCard post={posts[2]!} className="h-full" layout="default" size="sm" />
        <div class="bg-primary/90 text-primary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          blog
        </div>
      </div>
    )
  }

  {/* Second note - takes 1 column */}
  {
    notes.length > 1 && (
      <div class="relative col-span-full md:col-span-1 lg:col-span-1">
        <a
          href={routes.note({ slug: notes[1]!.slug })}
          class="group border-border/40 bg-card flex h-full min-h-[180px] flex-col justify-between rounded-lg border p-4 shadow-sm transition duration-200 hover:shadow-md dark:border-white/[0.2]"
        >
          <div class="flex items-center justify-between">
            <Time date={notes[1].data.published_date} className="text-xs text-muted-foreground" />
          </div>
          <div class="transition duration-200 group-hover:translate-x-2">
            <h3 class="text-foreground mb-2 line-clamp-2 font-medium tracking-tight">
              {notes[1].data.title}
            </h3>
            {notes[1].data.description && (
              <p class="text-muted-foreground line-clamp-3 text-sm">{notes[1]!.data.description}</p>
            )}
          </div>
        </a>
        <div class="bg-secondary/90 text-secondary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          note
        </div>
      </div>
    )
  }

  {/* Fourth blog post - takes 2 columns */}
  {
    posts.length > 3 && (
      <div class="relative col-span-full md:col-span-2 lg:col-span-2">
        <BlogCard post={posts[3]!} className="h-full" layout="horizontal" size="lg" />
        <div class="bg-primary/90 text-primary-foreground absolute top-0 right-0 z-20 rounded-tr-lg rounded-bl-lg px-3 py-1 text-xs font-medium tracking-wider uppercase shadow-sm">
          blog
        </div>
      </div>
    )
  }
</div>

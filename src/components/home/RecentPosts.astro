---
import type { BlogPostWithAuthors } from '@/lib/collections';
import { routes } from '@/configs/routes';

interface Props {
  posts: BlogPostWithAuthors[];
}

const { posts } = Astro.props;
---

<div class="flex flex-col gap-6">
  <div class="flex items-center justify-between">
    <h3 class="text-2xl font-semibold tracking-tight">Blog Posts</h3>
    <a
      href="/blog"
      class="group inline-flex items-center gap-1 text-sm font-medium text-muted-foreground transition-colors hover:text-primary"
    >
      View all
      <span class="inline-block transition-transform group-hover:translate-x-1" aria-hidden="true">
        â†’
      </span>
    </a>
  </div>
  <div class="grid gap-4">
    {
      posts.map(post => (
        <a
          href={routes.blog(post)}
          class="group flex flex-col gap-2 rounded-lg border border-border/40 bg-card/50 p-4 transition-all hover:bg-accent hover:shadow-md"
        >
          <h4 class="line-clamp-1 font-medium tracking-tight group-hover:text-accent-foreground">
            {post.data.title}
          </h4>
          {post.data.description && (
            <p class="line-clamp-2 text-sm text-muted-foreground">{post.data.description}</p>
          )}
          <div class="mt-auto flex items-center justify-between text-xs text-muted-foreground">
            <span>{post.readingTime}</span>
            <time datetime={post.data.published_date.toISOString()}>
              {new Date(post.data.published_date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
              })}
            </time>
          </div>
        </a>
      ))
    }
  </div>
</div>

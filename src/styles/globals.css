@tailwind base;
@tailwind components;
@tailwind utilities;
@layer base {
	:root {
		--radius: 0.5rem;

		--background: 36 39% 88%;
		--foreground: 36 45% 15%;
		--primary: 36 45% 70%;
		--primary-foreground: 36 45% 11%;
		--secondary: 40 35% 77%;
		--secondary-foreground: 36 45% 25%;
		--accent: 36 64% 57%;
		--accent-foreground: 36 72% 17%;
		--destructive: 0 84% 37%;
		--destructive-foreground: 0 0% 98%;
		--muted: 36 33% 75%;
		--muted-foreground: 36 45% 25%;
		--card: 36 46% 82%;
		--card-foreground: 36 45% 20%;
		--popover: 36 46% 82%;
		--popover-foreground: 36 45% 20%;
		--border: 36 45% 60%;
		--input: 36 45% 60%;
		--ring: 36 45% 30%;

		--chart-1: 251.4 91.3% 95.5%;
		--chart-1-foreground: 263.4 70% 50.4%;
		--chart-2: 355.6 100% 94.7%;
		--chart-2-foreground: 345.3 82.7% 40.8%;
		--chart-3: 214.3 94.6% 92.7%;
		--chart-3-foreground: 224.3 76.3% 48%;
		--chart-4: 167.2 85.5% 89.2%;
		--chart-4-foreground: 175.3 77.4% 26.1%;
		--chart-5: 48 96.5% 88.8%;
		--chart-5-foreground: 26 90.5% 37.1%;
	}
	.dark {
		--background: 338.2 10% 5%;
		--foreground: 210 20% 98%;
		--card: 338.2 10% 5%;
		--card-foreground: 215 37.9% 83.1%;
		--popover: 338.2 10% 5%;
		--popover-foreground: 215 37.9% 83.1%;
		--primary: 296.3 100% 79.9%;
		--primary-foreground: 298.3 38.8% 15%;
		--secondary: 334.3 10% 10%;
		--secondary-foreground: 215 37.9% 53.1%;
		--muted: 215 27.9% 16.9%;
		--muted-foreground: 217.9 10.6% 64.9%;
		--accent: 215 27.9% 16.9%;
		--accent-foreground: 210 20% 98%;
		--destructive: 0 62.8% 30.6%;
		--destructive-foreground: 210 20% 98%;
		--border: 215 27.9% 16.9%;
		--input: 215 27.9% 16.9%;
		--ring: 263.4 70% 50.4%;
		--radius: 0.5rem;

		--chart-1: 263.4 70% 50.4%;
		--chart-1-foreground: 251.4 91.3% 95.5%;
		--chart-2: 345.3 82.7% 40.8%;
		--chart-2-foreground: 355.6 100% 94.7%;
		--chart-3: 224.3 76.3% 48%;
		--chart-3-foreground: 214.3 94.6% 92.7%;
		--chart-4: 175.3 77.4% 26.1%;
		--chart-4-foreground: 167.2 85.5% 89.2%;
		--chart-5: 26 90.5% 37.1%;
		--chart-5-foreground: 48 96.5% 88.8%;

		--sidebar-background: 338 10% 2%;
		--sidebar-foreground: 215 38% 63%;
		--sidebar-primary: 296 100% 25%;
		--sidebar-primary-foreground: 298 39% 100%;
		--sidebar-accent: 334 10% 10%;
		--sidebar-accent-foreground: 215 37.9% 63.1%;
		--sidebar-border: 215 38% 45%;
		--sidebar-ring: 296 100% 72%;
	}
}

@layer base {
	* {
		@apply border-border;
		::selection {
			background-color: hsl(var(--primary) / 0.5);
			color: hsl(var(--primary-foreground));
		}
	}
	body {
		@apply bg-background text-foreground;
	}
}

@layer base {
	* {
		@apply border-border outline-ring/50;
	}
	body {
		@apply bg-background text-foreground;
	}

	:root,
	html[data-theme="dark"] pre:has(code),
	html[data-theme="dark"] pre:has(code) span {
		color: var(--shiki-dark) !important;
		background-color: var(--shiki-dark-bg) !important;
		font-style: var(--shiki-dark-font-style) !important;
		font-weight: var(--shiki-dark-font-weight) !important;
		text-decoration: var(--shiki-dark-text-decoration) !important;
	}
}

/* Citation and Bibliography Styling */
@layer components {
	/* Inline citation styling */
	.citation-inline {
		@apply font-medium transition-all duration-200 text-primary/80 hover:text-primary;
		@apply relative after:absolute after:bottom-0 after:left-0 after:w-0 after:h-px after:bg-primary after:transition-all after:duration-200;
		@apply hover:after:w-full;
	}

	.citation-inline:hover {
		@apply transform scale-105;
	}

	/* Bibliography section styling */
	.references-section {
		@apply mt-16 relative;
	}

	.references-section::before {
		@apply absolute -top-8 left-0 w-full h-px bg-gradient-to-r from-transparent via-border to-transparent;
		content: "";
	}

	.references-section h1,
	.references-section h2 {
		@apply text-3xl font-bold text-foreground mb-8 tracking-tight;
		@apply relative after:absolute after:bottom-0 after:left-0 after:w-12 after:h-1 after:bg-accent after:rounded-full;
		@apply pb-3;
	}

	/* CSL bibliography styling */
	.csl-bib-body {
		@apply space-y-6 mt-8;
	}

	.csl-entry {
		@apply text-sm leading-relaxed text-muted-foreground;
		@apply p-6 rounded-xl bg-gradient-to-r from-muted/20 to-muted/10;
		@apply border border-border/30 hover:border-border/60;
		@apply transition-all duration-300 ease-out;
		@apply hover:shadow-lg hover:shadow-muted/20;
		@apply hover:transform hover:scale-[1.02];
		@apply relative overflow-hidden;
	}

	.csl-entry::before {
		@apply absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-accent/50 to-primary/50;
		content: "";
	}

	.csl-entry:target {
		@apply bg-accent/10 border-accent/50 shadow-lg shadow-accent/20;
		@apply transform scale-[1.02];
	}

	/* Citation links within bibliography entries */
	.csl-entry a {
		@apply text-primary hover:text-accent transition-colors duration-200;
		@apply underline decoration-dotted underline-offset-2 hover:decoration-solid;
	}

	/* DOI and URL styling in bibliography */
	.csl-entry .doi,
	.csl-entry [href^="https://doi.org"] {
		@apply inline-flex items-center gap-1 text-xs font-mono;
		@apply bg-secondary/60 hover:bg-secondary/80;
		@apply px-3 py-1.5 rounded-full transition-all duration-200;
		@apply border border-secondary-foreground/10;
		@apply hover:transform hover:scale-105;
	}

	/* Author names in bibliography */
	.csl-entry .author {
		@apply font-semibold text-foreground;
	}

	/* Journal/publication names */
	.csl-entry em,
	.csl-entry i {
		@apply text-accent font-medium not-italic;
		@apply bg-accent/10 px-2 py-0.5 rounded-md;
	}

	/* Year styling */
	.csl-entry .year {
		@apply font-bold text-primary;
	}

	/* Custom styling for different citation elements */
	.csl-entry .csl-title {
		@apply font-medium text-base text-foreground mb-2;
	}

	/* Add subtle animation for bibliography entries */
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.csl-entry {
		animation: fadeInUp 0.5s ease-out forwards;
	}

	.csl-entry:nth-child(1) {
		animation-delay: 0.1s;
	}
	.csl-entry:nth-child(2) {
		animation-delay: 0.2s;
	}
	.csl-entry:nth-child(3) {
		animation-delay: 0.3s;
	}
	.csl-entry:nth-child(4) {
		animation-delay: 0.4s;
	}
	.csl-entry:nth-child(5) {
		animation-delay: 0.5s;
	}
}

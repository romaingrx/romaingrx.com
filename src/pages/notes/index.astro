---
import NoteHoverCard from '@/components/note/hover-card';
import Shell from '@/components/Shell.astro';
import Time from '@/components/ui/time.astro';
import { routes } from '@/configs/routes';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getNotes } from '@/lib/collections';

const notes = (await getNotes()).sort(
  (a, b) => b.data.published_date.getUTCDate() - a.data.published_date.getUTCDate()
);
const title = 'Notes';
const description =
  'Collection of notes, thoughts, and documentation on various topics. Notes are usually short thoughts, ideas, tricks, or documentation on a specific topic.';
---

<BaseLayout title={title} description={description}>
  <Shell type="article">
    <div class="space-y-12 py-8">
      <div class="space-y-4">
        <h1 class="text-4xl font-bold tracking-tight">Notes</h1>
        <p class="text-muted-foreground text-xl">
          {description}
        </p>
      </div>

      {
        notes.length > 0 ? (
          <ul class="space-y-2">
            {notes.map((note) => (
              <li class="group bg-card hover:bg-accent/40 rounded-lg border transition-colors">
                <NoteHoverCard note={note} client:visible>
                  <a href={routes.note(note)} class="flex items-center justify-between px-4 py-3">
                    <span class="group-hover:text-primary font-medium transition-colors">
                      {note.data.title}
                    </span>
                    <Time
                      date={note.data.published_date}
                      className="text-sm text-muted-foreground"
                    />
                  </a>
                </NoteHoverCard>
              </li>
            ))}
          </ul>
        ) : (
          <p class="text-muted-foreground text-center">No notes found.</p>
        )
      }
    </div>
  </Shell>
</BaseLayout>
